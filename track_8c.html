<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Matrix-Race: race/track.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Matrix-Race
   &#160;<span id="projectnumber">01</span>
   </div>
   <div id="projectbrief">A race game for the Robopoly matrix module.</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">race/track.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/pgmspace.h&gt;</code><br/>
<code>#include &quot;../utils/track-0.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="track_8h_source.html">track.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for track.c:</div>
<div class="dyncontent">
<div class="center"><img src="track_8c__incl.png" border="0" usemap="#race_2track_8c" alt=""/></div>
<map name="race_2track_8c" id="race_2track_8c">
<area shape="rect" id="node9" href="track_8h.html" title="Functions for advancing the track and loading segments into memory." alt="" coords="366,80,428,107"/></map>
</div>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="track_8c.html#a7b6700e986fe6b060278fc204cab2275">LOAD</a>(_position)&#160;&#160;&#160;pgm_read_byte_near(&amp;race_track[_position]);</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="track_8c.html#ac26da6e1020a3591bec0b53c99c82e27">track_increment_position</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Move forward in the track.  <a href="#ac26da6e1020a3591bec0b53c99c82e27"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="track_8c.html#a9b84887c7ed996512787ac66954ce8a4">track_load_line</a> (uint8_t _line)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a line from the track stored in program memory.  <a href="#a9b84887c7ed996512787ac66954ce8a4"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a> = 0</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a7b6700e986fe6b060278fc204cab2275"></a><!-- doxytag: member="track.c::LOAD" ref="a7b6700e986fe6b060278fc204cab2275" args="(_position)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOAD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_position</td><td>)</td>
          <td>&#160;&#160;&#160;pgm_read_byte_near(&amp;race_track[_position]);</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac26da6e1020a3591bec0b53c99c82e27"></a><!-- doxytag: member="track.c::track_increment_position" ref="ac26da6e1020a3591bec0b53c99c82e27" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void track_increment_position </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Move forward in the track. </p>
<p>This function automatically keeps track of the length of the race track, and will wrap around the end when needed. You only need to make sure that the first and last piece of track are compatible or the gameplay will be a little... surprising! </p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a>++;
    <span class="keywordflow">if</span>(<a class="code" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a> &gt; <a class="code" href="track-0_8h.html#a0cdb012fb838632cd67313d3d78ae497">TRACK_LENGTH</a>)
        <a class="code" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a> = 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9b84887c7ed996512787ac66954ce8a4"></a><!-- doxytag: member="track.c::track_load_line" ref="a9b84887c7ed996512787ac66954ce8a4" args="(uint8_t _line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t track_load_line </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>_line</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load a line from the track stored in program memory. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">_line</td><td>position of the line, from the current starting position</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>one byte containing the pixels for the line requested.</dd></dl>
<p>This function also keeps track of line length, and will wrap around the end of the track. If for example the track is 300 lines long and you ask for line 302, it will return line number 2. <em>_line</em> should be between 0 and 7 normally, for the 8x8 led matrix. </p>
<div class="fragment"><pre class="fragment">{
    uint8_t result = 0;

    <span class="keywordflow">if</span>(<a class="code" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a> + _line &gt; <a class="code" href="track-0_8h.html#a0cdb012fb838632cd67313d3d78ae497">TRACK_LENGTH</a>)
    {
        result = <a class="code" href="track_8c.html#a7b6700e986fe6b060278fc204cab2275">LOAD</a>(<a class="code" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a> + _line - <a class="code" href="track-0_8h.html#a0cdb012fb838632cd67313d3d78ae497">TRACK_LENGTH</a>);
    }
    <span class="keywordflow">else</span>
    {
        result = <a class="code" href="track_8c.html#a7b6700e986fe6b060278fc204cab2275">LOAD</a>(<a class="code" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a> + _line);
    }

    <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ad27db67ab1d130b0b38c8a65d234073e"></a><!-- doxytag: member="track.c::_start_position" ref="ad27db67ab1d130b0b38c8a65d234073e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="track_8c.html#ad27db67ab1d130b0b38c8a65d234073e">_start_position</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 24 2011 02:25:31 for Matrix-Race by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
